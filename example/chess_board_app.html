<!DOCTYPE html>

<!-- import Polymer -->
<link rel="import" href="../../packages/polymer/polymer.html">

<!-- import core elements -->
<link rel="import" href="../../packages/core_elements/core_item.html">
<link rel="import" href="../../packages/core_elements/core_toolbar.html">
<link rel="import" href="../../packages/core_elements/core_header_panel.html">
<link rel="import" href="../../packages/core_elements/core_icons.html">
<link rel="import" href="../../packages/core_elements/core_menu.html">
<link rel="import" href="../../packages/core_elements/core_drawer_panel.html">
<link rel="import" href="../../packages/paper_elements/paper_icon_button.html">
<link rel="import" href="../../packages/paper_elements/paper_input.html">

<!-- import the chess-board -->
<link rel="import" href="../../packages/chessboard/chess_board.html">

<polymer-element name="chess-board-app">
  <template>
    <style>
     :host {
        width: 100%;
        height: 100%;
        font-family: "RobotoDraft",Helvetica,Arial,sans-serif;
        font-size: 16px;
      }
      core-header-panel {
        background: white;
      }
      paper-icon-button {
        fill: #fff;
      }
      #navheader {
        background-color: #03A9F4;
      }
      .moves {
        padding: 20px;
      }
      core-toolbar {
        color: #fff;
        background-color: #03A9F4;
      }
      .content {
        padding: 20px;
      }
      /* drawer is always visible on a wide screen
       so menu button isn't required */
      core-drawer-panel:not([narrow]) #navicon {
        display: none;
      }
    }
    </style>
    <body fullbleed unresolved>
      <core-drawer-panel id="drawerPanel" class="right-drawer">
        <core-header-panel drawer>
          <core-toolbar id="navheader">
          </core-toolbar>
          <div class="moves">
            <template repeat="{{ pgnMove in $['chess_board'].pgn }}">
              {{pgnMove}}<br/>
            </template>
          </div>
        </core-header-panel>
        <core-header-panel main>
          <core-toolbar id="mainheader">
            <span flex>Chessboard App</span>
            <paper-icon-button id="load_fen" icon=file-download on-click="{{loadGameClicked}}"></paper-icon-button>
            <paper-icon-button id="navicon" icon="menu"></paper-icon-button>
          </core-toolbar>
          <div class="content">
            <chess-board id='chess_board' on-move='{{onMove}}'></chess-board>
            <core-item id="turn" label="{{$['chess_board'].turn}} to move"></core-item>
            <core-item id="gameStatus" label="{{$['chess_board'].gameStatus}}"></core-item>
          </div>
        </core-header-panel>
      </core-drawer-panel>
      <paper-dialog id="loaddlg" heading="Load New Game">
        <paper-input id="feninput" label="FEN position"></paper-input>
        <paper-button id="loadgame" icon="done" on-click="{{okClicked}}"></paper-button>
      </paper-dialog>
    </body>
  </template>
  <script type="application/dart" src="chess_board_app.dart"></script>
</polymer-element>

